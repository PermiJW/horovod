sudo apt-get install nfs-common;sudo mkdir efs;sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport fs-98ea9731.efs.us-west-2.amazonaws.com:/ efs;sudo apt-get install axel;mkdir nccl;cd nccl;mkdir nccl_install;cd nccl_install;sudo axel https://developer.download.nvidia.com/compute/machine-learning/nccl/secure/v2.2/prod/nccl-repo-ubuntu1604-2.2.13-ga-cuda9.0_1-1_amd64.deb?-eqYKLxhoCeKU_UZZGQ9anmtX0Chko_rXaiaP03BfP86ltenBy686weuWz4PlOVi4BwQKTYeUZTjaPZ8e8XxMImnUmJFcnGZXacyU5kkjDuqqU6qUsAiJj6V8TH0q7HwHtAzq9z0_I5gmB72saH5KnGLKY-QqlJYA1nheGSqYcVfQxE0TITE0iE_B_pAruF6wUC3mEhO_UVxt1g6hP525UNz;sudo dpkg -i nccl-repo-ubuntu1604-2.2.13-ga-cuda9.0_1-1_amd64.deb;sudo apt-key add /var/nccl-repo-2.2.13-ga-cuda9.0/7fa2af80.pub;sudo apt update;sudo apt install libnccl2 libnccl-dev;cd ~;mkdir mpi;cd mpi;mkdir mpi_install;cd mpi_install;axel https://download.open-mpi.org/release/open-mpi/v3.1/openmpi-3.1.1.tar.gz;gunzip -c openmpi-3.1.1.tar.gz | tar xf -;cd openmpi-3.1.1;./configure --prefix=/usr/local;make all install -j8;export PATH="$PATH:/usr/local/bin";export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/lib/";sudo ldconfig;source activate pytorch_p36;HOROVOD_GPU_ALLREDUCE=NCCL pip install --no-cache-dir horovod;pip install cython;pip install tensorboardX;pip install tqdm